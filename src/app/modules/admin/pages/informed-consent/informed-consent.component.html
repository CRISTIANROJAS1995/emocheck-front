<div class="page-gradient-bg relative flex min-h-screen w-full items-center justify-center overflow-hidden px-6 py-10">

    <!-- Decorative background circles -->
    <app-background-circles-inverted></app-background-circles-inverted>

    <div class="w-full max-w-[576px]">
        <div
            class="consent-card flex flex-col gap-6 rounded-[24px] border-[0.667px] border-[#CBFBF1] px-[32.667px] py-[32.667px]">
            <div class="flex flex-col items-center text-center">
                <!-- Icon with gradient background -->
                <div class="icon-gradient flex h-[56px] w-[56px] items-center justify-center rounded-2xl">
                    <img src="icons/consentimiento.svg" alt="Consentimiento" class="h-7 w-7" />
                </div>

                <!-- Title -->
                <h2 class="text-montserrat mt-4 text-center text-[15px] font-bold leading-[22.5px] text-[#155DFC]">
                    Consentimiento Informado</h2>

                <!-- Greeting -->
                <p class="text-montserrat mt-1 text-center text-[14px] leading-[20px]">
                    <span class="font-normal text-[#009689]">Bienvenida, </span>
                    <span class="font-bold text-[#009689]">{{ userName }}</span>
                </p>

                <!-- Information card -->
                <div class="info-box mt-4 w-full rounded-[16px] px-5 py-5 text-left">
                    <!-- Main message -->
                    <div class="mb-3 flex items-center gap-2.5">
                        <img src="icons/Icon-texto-consentimiento.svg" alt="" class="h-5 w-5 flex-shrink-0" />
                        <p class="text-montserrat text-[14px] font-normal leading-[20px] text-[#364153]">
                            <span class="font-bold text-[#009689]">Tu privacidad es nuestra prioridad.</span> Antes de
                            comenzar, queremos que conozcas cómo protegemos tu información:
                        </p>
                    </div>

                    <!-- Privacy points list -->
                    <div class="space-y-1 ml-9 mt-3">
                        <div class="flex items-start gap-2.5">
                            <img src="icons/Icon (6).svg" alt="" class="h-4 w-4 flex-shrink-0" />
                            <p class="text-montserrat text-[12px] leading-[20px] text-[#364153]">
                                Tus respuestas son <span class="font-bold">completamente confidenciales</span> y
                                anónimas para análisis grupales
                            </p>
                        </div>

                        <div class="flex items-start gap-2.5">
                            <img src="icons/Icon (6).svg" alt="" class="h-4 w-4 flex-shrink-0" />
                            <p class="text-montserrat text-[12px] leading-[20px] text-[#364153]">
                                Solo personal autorizado de salud ocupacional tendrá acceso a tu información individual
                            </p>
                        </div>

                        <div class="flex items-start gap-2.5">
                            <img src="icons/Icon (6).svg" alt="" class="h-4 w-4 flex-shrink-0" />
                            <p class="text-montserrat text-[12px] leading-[20px] text-[#364153]">
                                Los datos se utilizan únicamente para <span class="font-bold">mejorar tu
                                    bienestar</span> y el ambiente laboral
                            </p>
                        </div>

                        <div class="flex items-start gap-2.5">
                            <img src="icons/Icon (6).svg" alt="" class="h-4 w-4 flex-shrink-0" />
                            <p class="text-montserrat text-[12px] leading-[20px] text-[#364153]">
                                Cumplimos con la normativa de protección de datos personales (Ley 1581 de 2012)
                            </p>
                        </div>

                        <div class="flex items-start gap-2.5">
                            <img src="icons/Icon (6).svg" alt="" class="h-4 w-4 flex-shrink-0" />
                            <p class="text-montserrat text-[12px] leading-[20px] text-[#364153]">
                                Puedes solicitar modificación o eliminación de tus datos en cualquier momento
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Read full consent link -->
                <div class="mt-3 w-full text-left">
                    <a href="#" (click)="toggleFullConsent($event)"
                        class="link-teal text-[14px] font-normal leading-[20px] underline">
                        {{ showFullConsent ? 'Ocultar consentimiento completo' : 'Leer consentimiento completo' }}
                    </a>
                </div>

                <!-- Full consent text (collapsible) -->
                <div *ngIf="showFullConsent" class="mt-3 w-full">
                    <div
                        class="max-h-[200px] overflow-y-auto rounded-lg border border-gray-200 bg-white px-4 py-3 text-left shadow-sm">
                        <h3 class="text-montserrat text-[13px] font-bold text-gray-800 mb-2">
                            CONSENTIMIENTO INFORMADO PARA EVALUACIÓN DE SALUD MENTAL Y BIENESTAR LABORAL
                        </h3>
                        <p class="text-montserrat text-[12px] leading-[18px] text-gray-700 mb-3">
                            Yo, María Gómez, identificado/a con cédula de ciudadanía No. _____________, declaro que he
                            sido informado/a sobre los objetivos, procedimientos, beneficios y riesgos de la evaluación
                            de salud mental y factores psicosociales que realizaré a través de la plataforma EmoCheck.
                        </p>
                        <p class="text-montserrat text-[12px] leading-[18px] text-gray-700 mb-3">
                            Entiendo que mi participación es voluntaria y que puedo retirarme en cualquier momento sin
                            que esto genere consecuencias negativas en mi relación laboral.
                        </p>
                        <p class="text-montserrat text-[12px] leading-[18px] text-gray-700 mb-3">
                            Autorizo el tratamiento de mis datos personales conforme a la Ley 1581 de 2012 y el Decreto
                            1377 de 2013, exclusivamente para fines de promoción de la salud mental, prevención de
                            riesgos psicosociales y mejora del clima organizacional.
                        </p>
                        <p class="text-montserrat text-[12px] leading-[18px] text-gray-700">
                            El usuario entiende y acepta que los resultados obtenidos de dichas pruebas serán utilizados
                            exclusivamente con fines de orientación, formación, evaluación o acompañamiento profesional,
                            y no constituirán, en ningún caso, un diagnóstico clínico o psicológico.
                        </p>
                    </div>
                </div>

                <!-- Consent checkbox -->
                <form [formGroup]="consentForm" class="mt-3 w-full">
                    <div class="consent-box rounded-[14px] px-4 py-3">
                        <label class="flex items-start gap-2.5 cursor-pointer">
                            <input type="checkbox" formControlName="acceptConsent"
                                class="consent-checkbox mt-0.5 flex-shrink-0">
                            <span class="text-montserrat text-[12px] font-normal leading-[16px] text-justify">
                                He leído y acepto el consentimiento informado. Entiendo que mis datos serán tratados de
                                forma confidencial y que puedo solicitar información o retirar mi consentimiento en
                                cualquier momento.
                            </span>
                        </label>
                    </div>

                    <!-- Continue button -->
                    <button type="button" (click)="continueWithRegistration()" [disabled]="!consentForm.valid"
                        class="btn-primary-gradient mt-6 h-[44px] w-full rounded-[14px] px-5 text-[14px] font-medium leading-[20px] text-white shadow-lg transition-all hover:brightness-90 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:brightness-100">
                        Continuar con el registro
                    </button>
                </form>
            </div>
        </div>

        <!-- Privacy notice -->
        <div class="text-privacy mt-3 text-center text-[11px] font-normal leading-[15.714px]">
            Tus datos están protegidos bajo los más altos estándares de confidencialidad
        </div>
    </div>
</div>